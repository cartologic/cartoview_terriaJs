(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1649:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=m(n(250)),o=m(n(6)),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(7)),i=m(n(224)),u=m(n(1659)),c=m(n(1660)),f=m(n(1661)),s=m(n(760)),d=m(n(360)),p=n(34);function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function m(e){return e&&e.__esModule?e:{default:e}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=e.terria,n=e.tool,r=e.onCloseTool,o=e.t,d=n.type,p=n.item;if("delta"!==d||!p||!p.supportsDeltaComparison)return null;var y=b((0,l.useState)(void 0),2),m=y[0],v=y[1],g=b((0,l.useState)(void 0),2),D=g[0],S=g[1],O=b((0,l.useState)(p.discreteTime),2),k=O[0],P=O[1],E=b((0,l.useState)(p.discreteTime),2),w=E[0],T=E[1],M=b((0,l.useState)({beforePick:"Select a point by clicking on the map",afterPick:"Click another point to change the selection"}),2),I=M[0],C=M[1];return(0,l.useEffect)((function(){return p.isShown=!1,function(){p.isShown=!0}}),[]),(0,l.useEffect)((function(){var e=(0,s.default)(p,void 0,p.name+" (copy)");e.isEnabled=!0,e.isShown=!0,e.useOwnClock=!0,v(e)}),[p]),l.default.createElement("div",{className:u.default.deltaTool},l.default.createElement("h1",{className:u.default.title},o("deltaTool.titlePrefix"),": ",p.name),l.default.createElement("div",{className:u.default.body},l.default.createElement("div",null,l.default.createElement("span",null,o("deltaTool.description")),D&&l.default.createElement(h,{location:D}),void 0===D?l.default.createElement("h3",null,o("deltaTool.pickLocation")):l.default.createElement(c.default,{item:m,primaryDate:k,setPrimaryDate:P,secondaryDate:w,setSecondaryDate:T})),l.default.createElement("div",{className:u.default.buttons},l.default.createElement("button",{className:u.default.cancelBtn,onClick:function(){m&&(m.isEnabled=!1),r()}},o("deltaTool.cancelBtn")),l.default.createElement("button",{className:u.default.generateDeltaBtn,onClick:function(){var e=(0,a.default)(new Date,"yyyy-mm-dd'T'HH:MM:ss.l'Z'");m.name="Change Detection: ".concat(p.name," ").concat(e),m.featureTimesProperty=void 0,m.clock=void 0,m.intervals=void 0,m.supportsDeltaComparison=!1,m.disableUserChanges=!0;var t=j(k),n=j(w);m.shortReport="\n      ".concat(o("deltaTool.catalogItem.description"),"\n\n      **").concat(o("deltaTool.primaryImage"),"**:   ").concat(t,"<br/>\n      **").concat(o("deltaTool.secondaryImage"),"**: ").concat(n,"\n    ").split("\n").map((function(e){return e.trim()})).join("\n");var l=_(k),i=_(w);m.parameters.time="".concat(l,",").concat(i),m.showDeltaImagery(l,i),r()},disabled:void 0===D},o("deltaTool.generateDeltaBtn")))),l.default.createElement(f.default,{terria:t,location:D,onPick:function(e,n){for(var r,a=0;a<e.features.length;a++)if(e.features[a].imageryLayer===m.imageryLayer){r=e.features[a];break}if(r)try{m.filterIntervalsByFeature(r,e),function(e){var t=b(e.slice(e.length-2),2),n=t[0],r=t[1];n&&(P(n),T(r||n))}(m.availableDates),S(n),C({beforePick:"Click another point to change the selection",afterPick:"Click another point to change the selection"})}catch(e){(0,i.default)(t,e)}else C({beforePick:"Error when trying to resolve imagery at location! Please select a different location or zoom level.",afterPick:"Click another point to change the selection"})},messages:I}))}function h(e){var t=e.location,n=(0,p.useTranslation)().t,r=(0,d.default)(t.longitude,t.latitude);return l.default.createElement("section",null,l.default.createElement("h4",null,n("deltaTool.selectedLocation")),l.default.createElement("div",{className:u.default.location},r.latitude,", ",r.longitude))}function _(e){return(0,a.default)(e,"yyyy-mm-dd'T'HH:MM:ss.l'Z'",!0)}function j(e){return(0,a.default)(e,"dd-mm-yyyy",!0)}g.propTypes={terria:o.default.object.isRequired,tool:o.default.object.isRequired,onCloseTool:o.default.func.isRequired,t:o.default.func.isRequired},g.displayName="DeltaTool",h.propTypes={location:o.default.object.isRequired},h.displayName="PrettyLocation";var D=(0,p.withTranslation)()(g);t.default=D},1659:function(e,t,n){e.exports={deltaTool:"tjs-delta-tool__deltaTool tjs-tool-panel__tool",title:"tjs-delta-tool__title",body:"tjs-delta-tool__body",buttons:"tjs-delta-tool__buttons",cancelBtn:"tjs-delta-tool__cancelBtn tjs-_buttons__btn-grey",generateDeltaBtn:"tjs-delta-tool__generateDeltaBtn tjs-_buttons__btn tjs-_buttons__btn-primary",location:"tjs-delta-tool__location",datePickers:"tjs-delta-tool__datePickers",pickerButtons:"tjs-delta-tool__pickerButtons",currentDate:"tjs-delta-tool__currentDate tjs-_buttons__btn",previousDate:"tjs-delta-tool__previousDate tjs-_buttons__btn",nextDate:"tjs-delta-tool__nextDate tjs-_buttons__btn",picker:"tjs-delta-tool__picker",datePickerPopup:"tjs-delta-tool__datePickerPopup"}},1660:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=y(n(250)),o=y(n(0)),l=y(n(6)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(7)),u=n(318),c=y(n(555)),f=y(n(49)),s=y(n(1659)),d=n(34);function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function y(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=e.item,n=e.primaryDate,r=e.setPrimaryDate,a=e.secondaryDate,o=e.setSecondaryDate,l=e.t,u=[h(),h()],c=function(e,t){var n=m(0===e?u:[u[1],u[0]],2),r=n[0],a=n[1];r.setIsOpen(t),t&&a.setIsOpen(!1)},f=t.availableDates,d=t.dateFormat&&t.dateFormat.currentTime;return i.default.createElement("div",{className:s.default.datePickers},i.default.createElement("section",null,i.default.createElement("h4",null,l("deltaTool.primaryImage")),i.default.createElement("div",{title:"Select a time"},i.default.createElement(g,{date:n,setDate:r,availableDates:f,dateFormatting:d,isOpen:u[0].isOpen,setIsOpen:function(e){return c(0,e)}}))),i.default.createElement("section",null,i.default.createElement("h4",null,l("deltaTool.secondaryImage")),i.default.createElement("div",{title:"Select a time"},i.default.createElement(g,{date:a,setDate:o,availableDates:f,dateFormatting:d,isOpen:u[1].isOpen,setIsOpen:function(e){return c(1,e)}}))))}function g(e){var t=e.date,n=e.availableDates,r=e.setDate,l=e.dateFormatting,d=e.isOpen,p=e.setIsOpen,y=(0,o.default)(l)?(0,a.default)(t,l):(0,u.formatDateTime)(t),m=function(e,t){var n=t.indexOf(e),r=n>0?t[n-1]:void 0,a=n<t.length-1?t[n+1]:void 0;return{prevDate:r,nextDate:a}}(t,n),b=m.prevDate,v=m.nextDate;return i.default.createElement("div",null,i.default.createElement("div",{className:s.default.pickerButtons},i.default.createElement("button",{className:s.default.previousDate,title:"Previous time",disabled:!(0,o.default)(b),onClick:function(){return r(b)}},i.default.createElement(f.default,{glyph:f.default.GLYPHS.previous})),i.default.createElement("button",{className:s.default.currentDate,onClick:function(e){p(!d),e.stopPropagation()},title:"Select a time"},(0,o.default)(y)?y:"Currently out of range."),i.default.createElement("button",{className:s.default.nextDate,title:"Next time",disabled:!(0,o.default)(v),onClick:function(){return r(v)}},i.default.createElement(f.default,{glyph:f.default.GLYPHS.next}))),i.default.createElement("div",{className:s.default.picker},i.default.createElement(c.default,{currentDate:t,dates:n,onChange:r,popupStyle:s.default.datePickerPopup,openDirection:"none",isOpen:d,showCalendarButton:!1,onOpen:function(){return p(!0)},onClose:function(){return p(!1)}})))}function h(){var e=m((0,i.useState)(!1),2);return{isOpen:e[0],setIsOpen:e[1]}}v.propTypes={item:l.default.object.isRequired,primaryDate:l.default.object.isRequired,setPrimaryDate:l.default.func.isRequired,secondaryDate:l.default.object.isRequired,setSecondaryDate:l.default.func.isRequired,t:l.default.func.isRequired},g.propTypes={date:l.default.object.isRequired,setDate:l.default.func.isRequired,availableDates:l.default.array.isRequired,dateFormatting:l.default.string,isOpen:l.default.bool,setIsOpen:l.default.func.isRequired};var _=(0,d.withTranslation)()(v);t.default=_},1661:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=p(n(6)),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(7)),l=p(n(23)),i=p(n(3)),u=p(n(36)),c=n(279),f=p(n(225)),s=p(n(160));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){var t=e.terria,n=e.messages,r=e.location,a=e.onPick;(0,o.useEffect)((function(){var e,y=new f.default({message:n.beforePick});t.mapInteractionModeStack.push(y),d(r);var m=u.default.getObservable(y,"pickedFeatures").subscribe((function(t){e=t,y.customUi=function(){return o.default.createElement(s.default,{message:"Querying ".concat(r?"new":""," position...")})},y.message=function(){return n.afterPick};var u,c,f=(u=t.pickPosition,c=l.default.WGS84.cartesianToCartographic(u),{longitude:i.default.toDegrees(c.longitude),latitude:i.default.toDegrees(c.latitude)});d(f),e.allFeaturesAvailablePromise.then((function(){e===t&&a(t,f)}))}));return function(){e=void 0,m.dispose(),p(y),(0,c.removeMarker)(t)}}));var d=function(e){e&&(0,c.addMarker)(t,{name:"User selection",location:e})},p=function(e){y(t.mapInteractionModeStack.slice(-1),1)[0]===e&&t.mapInteractionModeStack.pop()};return null}b.propTypes={terria:a.default.object.isRequired,messages:a.default.object.isRequired,location:a.default.object,onPick:a.default.func.isRequired},b.displayName="LocationPicker";var v=b;t.default=v}}]);
//# sourceMappingURL=3.TerriaJS-specs.js.map